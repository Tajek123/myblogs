<!DOCTYPE html>
<html lang="en">

<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5724376452056475" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taj's Blog</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        header {
            background-color: #4CAF50;
            color: white;
            padding: 10px 0;
            text-align: center;
        }
        main {
            flex: 1;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            margin-top: 0;
        }
        .blog-post {
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
            margin-bottom: 10px;
        }
        .blog-post:last-child {
            border-bottom: none;
        }
        .blog-post h2 {
            margin: 0;
            font-size: 1.5em;
        }
        .blog-post p {
            margin: 5px 0;
        }
        #add-blog {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            text-align: center;
        }
        #add-blog:hover {
            background-color: #45a049;
        }
        #blog-form {
            display: none;
            margin-top: 20px;
        }
        #blog-form input, #blog-form textarea {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        #blog-form button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #blog-form button:hover {
            background-color: #45a049;
        }
        footer {
            margin-top: auto;
            background-color: #f1f1f1;
            padding: 20px;
            text-align: center;
        }
        #terms-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow-y: auto;
        }
        #terms-modal-content {
            position: relative;
            background: white;
            margin: 10% auto;
            padding: 20px;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            max-height: 80vh;
            overflow-y: auto;
        }
        #terms-modal h2 {
            text-align: center;
        }
        #accept-terms {
            display: block;
            margin: 20px auto 0;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #accept-terms:hover {
            background-color: #45a049;
        }
        .blur {
            filter: blur(5px);
        }
    </style>
    <script async src="https://js.stripe.com/v3/buy-button.js"></script>
</head>

<body>

<header>
    <h1>Taj's Blog</h1>
</header>

<main id="main-content">
    <div id="blog-posts">
        <div class="blog-post" bis_skin_checked="1">
            <h2>ABOUT ME</h2>
            <p>I am a rich guy with billions of dollars. My name is Taj Pocrnja Zupan I live in Thailand. I own 3 countries: Thailand, Taiwan, and Tajikistan. cya Peasants!</p>
        </div>
        <div class="blog-post" bis_skin_checked="1">
            <h2>My second blog</h2>
            <p>Hello! This is my second blog. I will talk about family. I have 1 brother. I have a mother and a father.</p>
        </div>
        <div class="blog-post" bis_skin_checked="1">
            <h2>My true net worth</h2>
            <p>Hello this is my third blog. I will talk about my definitely true net worth. As I said I am rich. Even Jeff Bezos and Elon Musk just dream to be rich like me. So my real net worth is not million, not billion but 69 TRILLION dollars!!! Yeah and what you have! Not even 0â‚¬! HAHA!!! You are in debt!!! MUHAHAHAHAHAHAHAHA!!!</p>
        </div>
    </div>
    <button id="add-blog" style="display: none;">+ Add Blog Post</button>
    <form id="blog-form">
        <input type="text" id="title" placeholder="Title" required>
        <textarea id="content" placeholder="Content" rows="5" required></textarea>
        <button type="submit">Post Blog</button>
    </form>
    <button id="checkout-button">Buy Premium</button>

    <stripe-buy-button
      buy-button-id="buy_btn_1PVTvvDKSb92j2e3tyaAASOu"
      publishable-key="pk_live_51P18VQDKSb92j2e3vfMw3JoHQ4J9yg6ySdKCFgVZk5QjlIZ7Q7SBdmZMeyFDuSJdUpXrurTmtrFa7lu9EHXIhcx100v1YIY1VU"
    >
    </stripe-buy-button>
    <b>Buy premium to upload blogs</b>
</main>

<div id="terms-modal">
    <div id="terms-modal-content">
        <h2>Terms and Conditions</h2>
        <p>Please read these terms and conditions carefully...</p>
        <p>[Long terms and conditions content]</p>
        <p>[More terms and conditions content]</p>
        <p>[Even more terms and conditions content]</p>
        <button id="accept-terms" disabled>Accept Terms and Conditions</button>
    </div>
</div>

<script>
    const stripe = Stripe('pk_live_51P18VQDKSb92j2e3vfMw3JoHQ4J9yg6ySdKCFgVZk5QjlIZ7Q7SBdmZMeyFDuSJdUpXrurTmtrFa7lu9EHXIhcx100v1YIY1VU');
    const termsModal = document.getElementById('terms-modal');
    const mainContent = document.getElementById('main-content');
    const acceptButton = document.getElementById('accept-terms');

    document.getElementById('checkout-button').addEventListener('click', () => {
        termsModal.style.display = 'block';
        mainContent.classList.add('blur');
    });

    document.getElementById('terms-modal-content').addEventListener('scroll', () => {
        const termsContent = document.getElementById('terms-modal-content');
        if (termsContent.scrollTop + termsContent.clientHeight >= termsContent.scrollHeight) {
            acceptButton.disabled = false;
        }
    });

    acceptButton.addEventListener('click', () => {
        termsModal.style.display = 'none';
        mainContent.classList.remove('blur');

        fetch('/create-checkout-session', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
        })
        .then(response => response.json())
        .then(session => {
            return stripe.redirectToCheckout({ sessionId: session.id });
        })
        .then(result => {
            if (result.error) {
                alert(result.error.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    });

    // Check premium status
    fetch('/premium-status')
    .then(response => response.json())
    .then(data => {
        if (data.hasPremium) {
            document.getElementById('add-blog').style.display = 'block';
        }
    });

    document.getElementById('add-blog').addEventListener('click', function() {
        document.getElementById('blog-form').style.display = 'block';
    });

    document.getElementById('blog-form').addEventListener('submit', function(event) {
        event.preventDefault();

        const title = document.getElementById('title').value;
        const content = document.getElementById('content').value;

        const post = document.createElement('div');
        post.classList.add('blog-post');
        post.innerHTML = '<h2>' + title + '</h2><p>' + content + '</p>';

        document.getElementById('blog-posts').appendChild(post);

        document.getElementById('blog-form').style.display = 'none';
        document.getElementById('blog-form').reset();
    });
</script>

</body>
</html>
